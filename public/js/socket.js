// Generated by CoffeeScript 1.10.0

/* public/js/socket.js */
var fingerprint, myUrl, socket;

myUrl = location.protocol + "//" + document.domain + (location.port ? ':' + location.port : '');

socket = io.connect(myUrl);

fingerprint = null;

socket.on('connect', function() {
  var ref;
  ref = document.location.pathname.split('/'), fingerprint = ref[ref.length - 1];
  return socket.emit('HANDSHAKE', fingerprint);
});

socket.on('INITIALIZE', function(payload) {
  initialize(payload.stickyData);
  return document.title = payload.boardName + " - Scrumtious Scrumboard";
});

window.onbeforeunload = function() {
  socket.emit('CLOSE', {
    fingerprint: fingerprint,
    stickyData: stickyManager.data()
  });
  return console.log('Closed');
};
