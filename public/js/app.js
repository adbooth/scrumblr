// Generated by CoffeeScript 1.10.0

/* public/js/app.js */
var app, getGlobals;

app = angular.module('Scrumtious', []);

getGlobals = {};

app.controller('BoardCtrl', [
  '$scope', function($scope) {
    $scope.stickyList = [];
    $scope.stickyIdTracker = 0;
    getGlobals = function() {
      return [$scope.stickyList, $scope.stickyIdTracker];
    };
    return $scope.addSticky = function() {
      return $scope.stickyList.push({
        idn: $scope.stickyIdTracker++,
        x: 50,
        y: 50,
        text: prompt('Give your sticky some content:')
      });
    };
  }
]);

app.directive('sticky', function($document) {
  return {
    restrict: 'E',
    scope: {
      info: '='
    },
    template: '<div class="card blue-grey darken-1">\n  <div class="card-content white-text">\n    <p>{{info.text}}</p>\n</div>',
    link: function(scope, element, attrs) {
      var info, mousemove, mouseup, startX, startY;
      info = scope.info;
      startX = info.x;
      startY = info.y;
      element.css({
        position: 'relative',
        display: 'block',
        width: '150px',
        height: '150px',
        cursor: 'pointer',
        left: info.x + 'px',
        top: info.y + 'px'
      });
      element.on('mousedown', function(event) {
        event.preventDefault();
        startX = event.screenX - info.x;
        startY = event.screenY - info.y;
        $document.on('mousemove', mousemove);
        return $document.on('mouseup', mouseup);
      });
      mousemove = function(event) {
        info.y = event.screenY - startY;
        info.x = event.screenX - startX;
        return element.css({
          top: info.y + 'px',
          left: info.x + 'px'
        });
      };
      return mouseup = function(event) {
        $document.off('mousemove', mousemove);
        return $document.off('mouseup', mouseup);
      };
    }
  };
});
